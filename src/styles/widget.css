@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables for theming */
:root {
  --background: 0 0% 100%;
  --foreground: 222.2 84% 4.9%;
  --card: 0 0% 100%;
  --card-foreground: 222.2 84% 4.9%;
  --popover: 0 0% 100%;
  --popover-foreground: 222.2 84% 4.9%;
  --primary: 222.2 47.4% 11.2%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 222.2 84% 4.9%;
  --muted: 210 40% 96%;
  --muted-foreground: 215.4 16.3% 46.9%;
  --accent: 210 40% 96%;
  --accent-foreground: 222.2 84% 4.9%;
  --destructive: 0 84.2% 60.2%;
  --destructive-foreground: 210 40% 98%;
  --border: 214.3 31.8% 91.4%;
  --input: 214.3 31.8% 91.4%;
  --ring: 222.2 84% 4.9%;
  --radius: 0.5rem;
}

/* Widget specific CSS variables */
.chat-widget-embed {
  --widget-primary: #6366f1;
  --widget-primary-rgb: 99, 102, 241;
}

/* Widget container isolation */
.chat-widget-embed {
  all: initial;
  position: fixed;
  z-index: 2147483647; /* Maximum z-index */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
    sans-serif;
}

/* Reset any potential conflicts */
.chat-widget-embed * {
  box-sizing: border-box;
}

/* Animation for chat window entrance - matching original */
@keyframes slideInUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.chat-window-enter {
  animation: slideInUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Message animations */
@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.message-enter {
  animation: messageSlideIn 0.4s ease-out forwards;
}

/* Button animations */
@keyframes buttonPulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

.chat-button-pulse {
  animation: buttonPulse 2s infinite;
}

/* Shimmer effect */
@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

.shimmer-bg {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.1),
    transparent
  );
  background-size: 200px 100%;
  animation: shimmer 2s infinite;
}

/* Glass effect for modern look - matching original */
.glass-effect {
  backdrop-filter: blur(16px);
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Ensure consistent floating design */
.chat-window {
  border-radius: 1.5rem;
}

@media (max-width: 640px) {
  .chat-window {
    border-radius: 1rem;
  }
}

/* Typing animation for dots */
@keyframes typing {
  0%,
  60%,
  100% {
    transform: translateY(0);
    opacity: 0.4;
  }
  30% {
    transform: translateY(-10px);
    opacity: 1;
  }
}

/* Bounce animation for typing indicator */
@keyframes bounce {
  0%,
  80%,
  100% {
    transform: scale(0);
  }
  40% {
    transform: scale(1);
  }
}

.animate-bounce {
  animation: bounce 1.4s infinite ease-in-out both;
}

/* Shadow effects */
.shadow-widget {
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
}

.shadow-3xl {
  box-shadow: 0 35px 60px -12px rgba(0, 0, 0, 0.3);
}

/* Custom scrollbar for messages */
.chat-messages::-webkit-scrollbar {
  width: 4px;
}

.chat-messages::-webkit-scrollbar-track {
  background: transparent;
}

.chat-messages::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 2px;
}

.chat-messages::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}

/* Focus styles for accessibility */
.chat-widget-embed button:focus-visible {
  outline: 2px solid var(--widget-primary, #6366f1);
  outline-offset: 2px;
}

.chat-widget-embed input:focus-visible {
  outline: 2px solid var(--widget-primary, #6366f1);
  outline-offset: 2px;
}

/* Message status icons */
.message-status {
  transition: all 0.2s ease;
}

/* Floating particles animation */
@keyframes float {
  0%,
  100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

.floating-particle {
  animation: float 3s ease-in-out infinite;
}

/* Responsive design helpers */
@media (max-width: 640px) {
  .chat-widget-container {
    margin: 0 16px 16px 0;
  }
}

/* Specific styling for input area only - won't affect message icons */
.chat-widget-embed .input-area input {
  border-radius: 0.75rem;
  border: 1px solid #e5e7eb;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(4px);
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
  padding: 0.75rem 1rem;
}

.chat-widget-embed .input-area input:focus {
  outline: none;
  border-color: var(--widget-primary, #6366f1);
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1),
    0 4px 6px -1px rgba(0, 0, 0, 0.1);
  background: rgba(255, 255, 255, 0.95);
}

.chat-widget-embed .input-area input::placeholder {
  color: #9ca3af;
  opacity: 1;
}

/* Responsive input styling */
@media (min-width: 640px) {
  .chat-widget-embed .input-area input {
    border-radius: 1rem;
    padding: 0.875rem 1.25rem;
  }
}

/* Button styling in input area only */
.chat-widget-embed .input-area button {
  border-radius: 0.75rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
}

.chat-widget-embed .input-area button:hover {
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
  transform: scale(1.05);
}

.chat-widget-embed .input-area button:disabled {
  opacity: 0.5;
  transform: scale(1);
}

@media (min-width: 640px) {
  .chat-widget-embed .input-area button {
    border-radius: 1rem;
  }
}

/* chat Widget Floating css  */
@keyframes typing {
  0%,
  60%,
  100% {
    transform: translateY(0);
    opacity: 0.4;
  }
  30% {
    transform: translateY(-10px);
    opacity: 1;
  }
}

@keyframes messageSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes buttonPulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
}

@keyframes shimmer {
  0% {
    background-position: -200px 0;
  }
  100% {
    background-position: calc(200px + 100%) 0;
  }
}

@keyframes slideInUp {
  from {
    transform: translateY(100%) scale(0.8);
    opacity: 0;
  }
  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.message-enter {
  animation: messageSlideIn 0.4s ease-out forwards;
}

.chat-button-pulse {
  animation: buttonPulse 2s infinite;
}

.chat-window-enter {
  animation: slideInUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

.shimmer-bg {
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.1),
    transparent
  );
  background-size: 200px 100%;
  animation: shimmer 2s infinite;
}

.glass-effect {
  backdrop-filter: blur(16px);
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* Ensure consistent floating design */
.chat-window {
  border-radius: 1.5rem;
}

@media (max-width: 640px) {
  .chat-window {
    border-radius: 1rem;
  }
}
